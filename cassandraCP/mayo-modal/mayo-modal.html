<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-button/paper-button.html">

<dom-module id="mayo-modal">
  <template>
    <style>
     .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .modal-content {
          background-color:#D8D8D8 ;
          margin: 15% auto; /* 15% from the top and centered */
          padding: 20px;
          border: 1px solid #888;
          width: 80%; /* Could be more or less, depending on screen size */
        }
        
        div header{
          background-color: #F3C3E4;
        }

        .bodyModal{
          background-color: #FF6773;
        }

    </style>
    <paper-button raised id="boton" on-click="show" class="indigo">Open</paper-button>
    
    <div id="myModal" class="modal">
      <div class="modal-content"> 
        <header>[[title]]</header> 
        <body class="bodyModal">
          <h4>[[body]]</h4>
          <paper-button toggles raised id="botonClosed" on-click="hide" class="green">Close</paper-button>
        </body>
        
      </div>
    </div>
  </template>

  <script>
    /**
     * `mayo-modal`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class MayoModal extends Polymer.Element {
      static get is() { return 'mayo-modal'; }
      static get properties() {
        return {
         title: {
            type: String,
            value: 'Title Modal'
          },
          body: {
            type: String,
            value: 'Body Modal'
          },
          delay: {
            type: Number,
            value: 1000
          },
          typeProperty: {
            type: String,
            value:'info',
            observer: '_cambiarColor'
            
           
          }
        };
      }
      show() {
        
        const modal = this.shadowRoot.querySelector('#myModal');
        const botonsito = this.shadowRoot.querySelector('#botonClosed');
        modal.style.display = "block"

        this.dispatchEvent(new CustomEvent('modal-opened', {
          bubbles: false,
          composed: false,
          detail: "modal activo"          
        }));

        //let semaforo = Math.random()%2 === 0? 
       
      }
      hide() {
        const modal1 = this.shadowRoot.querySelector('#myModal');
        const botonsito1 = this.shadowRoot.querySelector('#boton');
        modal1.style.display = "none"
        this.dispatchEvent(new CustomEvent('modal-closed', {
          bubbles: false,
          composed: false,
          detail: "modal cerrado"
        }));
      }
      cambiarColor(param){
        const styleModal = this.shadowRoot.querySelector('#myModal');
        switch(param){
          case 'info' :styleModal.style.backgroundColor='#B8C5FC'
          break;
          case 'success' :styleModal.style.backgroundColor='#33A240'
          break;
          case 'error' :styleModal.style.backgroundColor='#EB5439'
          break;
          case 'warning' :styleModal.style.backgroundColor='#DCB833'
          break;
        }
      }
    }

    window.customElements.define(MayoModal.is, MayoModal);
  </script>
</dom-module>
